name: keepalive

on:
  schedule:
    - cron: "*/10 * * * *"    # 10ë¶„ë§ˆë‹¤ ì‹¤í–‰
  workflow_dispatch:
  push:
    paths:
      - ".github/workflows/keepalive.yml"

jobs:
  ping:
    runs-on: ubuntu-latest

    steps:
      ###############################################################
      # ğŸ”¥ ìš´ì˜ìš© ì„œë¹„ìŠ¤ KeepAlive (ì‹¤ì œ í˜„ì¬ ê³ ê°ì´ ì‚¬ìš©í•˜ëŠ” ë²„ì „)
      ###############################################################

      # 1) ë§Œì„¸ë ¥ API (ìš´ì˜)
      - name: [ìš´ì˜] Ping Manseryeok API
        run: curl -fsS -m 10 https://my-manseryeok.onrender.com/ping || true

      # 2) Proxy ì„œë²„ (ìš´ì˜)
      - name: [ìš´ì˜] Ping Proxy Server
        run: curl -fsS -m 10 https://saju-proxy.onrender.com/ping || true

      # 3) ê²°ì œ ì„œë²„ (ìš´ì˜ - my-payment-server-test.vercel.app)
      - name: [ìš´ì˜] Ping Payment Server
        run: curl -fsS -m 10 https://easysaju-test.vercel.app/api/ping || true

      # 4) ìƒí’ˆ ëª©ë¡ ì¡°íšŒ WebApp (ìš´ì˜)
      - name: [ìš´ì˜] Ping Products GAS
        run: curl -fsS -m 10 "https://script.google.com/macros/s/AKfycbxqdItEzCRdoaBbHWUM3EOqaCIBGRsT3uF6huiC2sfvt_RyyULixbo7ipXAp8kvfOuA/exec?ping=1" || true

      # 5) ê²°ì œ í† í° ì €ì¥ WebApp (ìš´ì˜)
      - name: [ìš´ì˜] Ping GAS Token Store
        run: curl -fsS -m 10 "https://script.google.com/macros/s/AKfycbx1LiZJ2A1beNiUOoScSswp97Bpf_g1eNqn1UanX3hFlA-Nqnoj3Qg0RPF0fLVE2CRuQQ/exec?ping=1" || true

      # 6) ì£¼ë¬¸ ê¸°ë¡ìš© Logger WebApp (ìš´ì˜)
      - name: [ìš´ì˜] Ping Order Logger
        run: curl -fsS -m 10 "https://script.google.com/macros/s/AKfycbzhi4556hgBKctN3KVBlPdkl1vFD3oG7Wv7Hdm6pk16VGG8OF6q6EaPT8t_5WTX87Jb/exec?ping=1" || true


      ###############################################################
      # ğŸ”§ í…ŒìŠ¤íŠ¸ìš© ì„œë¹„ìŠ¤ KeepAlive (ìƒˆë¡œ ë³µì œí•œ í™˜ê²½)
      ###############################################################

      # 7) í…ŒìŠ¤íŠ¸ ê²°ì œ ì„œë²„ (my-payment-server.vercel.app)
      - name: [í…ŒìŠ¤íŠ¸] Ping Payment Server
        run: curl -fsS -m 10 https://my-payment-server.vercel.app/api/ping || true

      # 8) í…ŒìŠ¤íŠ¸ í”„ë¡ íŠ¸ (easysaju-dev.vercel.app)
      - name: [í…ŒìŠ¤íŠ¸] Ping Test Front
        run: curl -fsS -m 10 https://easysaju-dev.vercel.app || true

      # 9) í…ŒìŠ¤íŠ¸ - ì£¼ë¬¸ ê¸°ë¡ WebApp
      - name: [í…ŒìŠ¤íŠ¸] Ping Order Logger (TEST)
        run: curl -fsS -m 10 "https://script.google.com/macros/s/AKfycbz_SRAMhhOT396196sgEzHeDMNk_oF7IL-M5BpAReKum04hVtkVYw0AwY71P4SyEdm-/exec?ping=1" || true

      # 10) í…ŒìŠ¤íŠ¸ - ìƒí’ˆ ëª©ë¡ ì¡°íšŒ WebApp
      - name: [í…ŒìŠ¤íŠ¸] Ping Products GAS (TEST)
        run: curl -fsS -m 10 "https://script.google.com/macros/s/AKfycbzi-6WMsfTiDCR8OlPvx4Z6V8NMPxr94nmow-kO48HDCDMyvufOzrS9ZbZu9LWo2sMEDg/exec?ping=1" || true

      # 11) í…ŒìŠ¤íŠ¸ - ê²°ì œ í† í° WebApp
      - name: [í…ŒìŠ¤íŠ¸] Ping GAS Token Store (TEST)
        run: curl -fsS -m 10 "https://script.google.com/macros/s/AKfycbyfxB-Vml1Wd1fhW98ztLRyduVX_PI81WatJQza1FNuDOswAJEcntYGBZWo8cqtyzQ/exec?ping=1" || true
